import{c as i,g as S,u as F,j as e,e as f,X as q,P as L,F as j,D as B,A as k,Z as N,B as O}from"./index-DNUMW6e8.js";import{r as m}from"./react-vendor-nf7bT_Uh.js";import{M as A,W as V}from"./wheat-DkTmveXo.js";import{T as _}from"./truck-3yKFS4DX.js";import"./swiper-vendor-y1f9feYf.js";/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=i("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=i("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=i("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.454.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=i("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),ee=({isOpen:w,onClose:v,onCheckout:h})=>{const{cart:n,updateCartQuantity:g,removeFromCart:C,clearCart:G,getCartCount:E,getCartTotal:M}=S(),{t:l,currentLang:r,productsMap:d,loading:I}=F(),[a,y]=m.useState(null),[H,p]=m.useState(!1);m.useEffect(()=>{if(n.length===0){y(null);return}(async()=>{p(!0);try{const s=n.map(T=>T.productId),c=await(await fetch("https://softcream-api.mahmoud-zahran20025.workers.dev?path=/products/nutrition-summary",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({productIds:s})})).json();c.success&&c.data&&(y(c.data),console.log("âœ… Nutrition data loaded:",c.data))}catch(s){console.error("âŒ Failed to fetch nutrition:",s)}finally{p(!1)}})()},[n]);const o=t=>r==="ar"?`${t} Ø¬.Ù…`:`${t} EGP`,u=t=>t?r==="ar"?t.name:t.nameEn:"",P=()=>{n.length!==0&&h&&h()},b=t=>{t&&t.stopPropagation(),v()};if(!w)return null;const z=E(),D=M(d),x=n.length===0;return I&&Object.keys(d).length,e.jsx("div",{className:"fixed inset-0 bg-black/75 backdrop-blur-md z-[9999] flex items-end md:items-center justify-center md:p-6",onClick:b,role:"dialog","aria-modal":"true","aria-labelledby":"cart-title",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-t-3xl md:rounded-3xl max-w-[750px] w-full max-h-[92vh] md:max-h-[85vh] overflow-hidden shadow-2xl relative",onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between p-5 border-b border-pink-100 dark:border-gray-700 sticky top-0 bg-white dark:bg-gray-800 z-10 backdrop-blur-sm",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-11 h-11 bg-gradient-to-br from-pink-100 to-purple-100 dark:from-pink-900/30 dark:to-purple-900/30 rounded-xl flex items-center justify-center shadow-sm",children:e.jsx(f,{className:"w-6 h-6 text-primary"})}),e.jsx("span",{className:"text-xl font-bold text-gray-800 dark:text-gray-100",id:"cart-title",children:l("cartTitle")||"Ø³Ù„Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª"}),e.jsx("span",{className:"min-w-[28px] h-6 px-2.5 bg-gradient-to-r from-primary to-secondary text-white rounded-full text-sm font-bold flex items-center justify-center shadow-lg",children:z})]}),e.jsx("button",{className:"w-11 h-11 rounded-full bg-gray-100 dark:bg-gray-700 hover:bg-red-500 hover:text-white flex items-center justify-center transition-[transform,background-color] hover:rotate-90 duration-300 hover:shadow-lg active:scale-95 border-2 border-transparent hover:border-red-500",onClick:b,"aria-label":l("closeCart")||"Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ø³Ù„Ø©",children:e.jsx(q,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"p-5 min-h-[350px] max-h-[calc(92vh-240px)] md:max-h-[calc(85vh-280px)] overflow-y-auto",children:[x?e.jsxs("div",{className:"flex flex-col items-center justify-center py-16 text-center",children:[e.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-pink-50 to-purple-50 dark:from-gray-700 dark:to-gray-600 rounded-full flex items-center justify-center mb-5 animate-pulse",children:e.jsx(f,{className:"w-12 h-12 text-pink-300 dark:text-gray-500"})}),e.jsx("p",{className:"text-lg font-semibold text-gray-600 dark:text-gray-300 mb-2",children:l("cartEmptyTitle")||"Ø³Ù„ØªÙƒ ÙØ§Ø±ØºØ© Ø­Ø§Ù„ÙŠØ§Ù‹"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:l("cartEmptySubtitle")||"Ø£Ø¶Ù Ø¨Ø¹Ø¶ Ø§Ù„Ø¢ÙŠØ³ ÙƒØ±ÙŠÙ… Ø§Ù„Ù„Ø°ÙŠØ°! ğŸ¦"})]}):e.jsx("div",{className:"space-y-4",children:n.map(t=>{const s=d[t.productId];return s?e.jsxs("div",{className:"flex gap-4 p-4 bg-gradient-to-br from-pink-50 to-purple-50 dark:from-gray-700 dark:to-gray-600 rounded-2xl shadow-sm hover:shadow-md transition-shadow",children:[e.jsx("img",{src:s.image,alt:u(s),className:"w-20 h-20 object-cover rounded-xl",loading:"lazy"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-bold text-gray-800 dark:text-gray-100 truncate",children:u(s)}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:o(s.price)}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx("button",{onClick:()=>g(t.productId,t.quantity-1),className:"w-8 h-8 rounded-full bg-white dark:bg-gray-800 hover:bg-primary hover:text-white flex items-center justify-center transition-colors","aria-label":"Decrease quantity",children:e.jsx(A,{className:"w-4 h-4"})}),e.jsx("span",{className:"font-bold text-gray-800 dark:text-gray-100 min-w-[30px] text-center",children:t.quantity}),e.jsx("button",{onClick:()=>g(t.productId,t.quantity+1),className:"w-8 h-8 rounded-full bg-white dark:bg-gray-800 hover:bg-primary hover:text-white flex items-center justify-center transition-colors","aria-label":"Increase quantity",children:e.jsx(L,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>C(t.productId),className:"ml-auto w-8 h-8 rounded-full bg-red-100 hover:bg-red-500 text-red-500 hover:text-white flex items-center justify-center transition-colors","aria-label":"Remove item",children:e.jsx($,{className:"w-4 h-4"})})]})]}),e.jsx("div",{className:"text-right",children:e.jsx("p",{className:"font-bold text-lg text-primary",children:o(s.price*t.quantity)})})]},t.productId):(console.warn("âš ï¸ Product not found for ID:",t.productId,"| Available IDs:",Object.keys(d)),e.jsxs("div",{className:"p-4 bg-gray-100 dark:bg-gray-700 rounded-lg animate-pulse",children:[e.jsx("div",{className:"h-20 bg-gray-200 dark:bg-gray-600 rounded"}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:["Loading product ",t.productId,"..."]})]},t.productId))})}),!x&&a&&e.jsxs("div",{className:"px-5 py-4 bg-gradient-to-br from-orange-50 to-pink-50 dark:from-gray-700 dark:to-gray-600 border-y border-orange-100 dark:border-gray-600",children:[e.jsxs("h3",{className:"font-bold text-gray-900 dark:text-gray-100 mb-3 flex items-center gap-2",children:[e.jsx(j,{className:"w-5 h-5 text-orange-500"}),r==="ar"?"Ù…Ù„Ø®Øµ Ø§Ù„ØªØºØ°ÙŠØ©":"Nutrition Summary"]}),e.jsxs("div",{className:"grid grid-cols-4 gap-2 mb-3",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-3 text-center shadow-sm",children:[e.jsx(j,{className:"w-5 h-5 text-orange-500 mx-auto mb-1"}),e.jsx("div",{className:"text-lg font-bold text-gray-900 dark:text-gray-100",children:a.totalCalories||0}),e.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:r==="ar"?"Ø³Ø¹Ø±Ø§Øª":"calories"})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-3 text-center shadow-sm",children:[e.jsx(B,{className:"w-5 h-5 text-blue-500 mx-auto mb-1"}),e.jsxs("div",{className:"text-lg font-bold text-gray-900 dark:text-gray-100",children:[(a.totalProtein||0).toFixed(1),"g"]}),e.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:r==="ar"?"Ø¨Ø±ÙˆØªÙŠÙ†":"protein"})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-3 text-center shadow-sm",children:[e.jsx(V,{className:"w-5 h-5 text-yellow-600 mx-auto mb-1"}),e.jsxs("div",{className:"text-lg font-bold text-gray-900 dark:text-gray-100",children:[(a.totalCarbs||0).toFixed(1),"g"]}),e.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:r==="ar"?"ÙƒØ±Ø¨ÙˆÙ‡ÙŠØ¯Ø±Ø§Øª":"carbs"})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-3 text-center shadow-sm",children:[e.jsx(k,{className:"w-5 h-5 text-red-500 mx-auto mb-1"}),e.jsxs("div",{className:"text-lg font-bold text-gray-900 dark:text-gray-100",children:[(a.totalFat||0).toFixed(1),"g"]}),e.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:r==="ar"?"Ø¯Ù‡ÙˆÙ†":"fat"})]})]}),(a.mentalEnergy>0||a.physicalEnergy>0||a.balancedEnergy>0)&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-3 space-y-2 shadow-sm",children:[e.jsxs("h4",{className:"text-sm font-bold text-gray-900 dark:text-gray-100 flex items-center gap-2",children:[e.jsx(N,{className:"w-4 h-4 text-yellow-500"}),r==="ar"?"ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ø·Ø§Ù‚Ø©":"Energy Distribution"]}),a.mentalEnergy>0&&e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(O,{className:"w-4 h-4 text-purple-600"}),e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:r==="ar"?"Ø°Ù‡Ù†ÙŠØ©":"Mental"})]}),e.jsx("span",{className:"font-bold text-purple-600",children:a.mentalEnergy})]}),a.physicalEnergy>0&&e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(k,{className:"w-4 h-4 text-orange-600"}),e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:r==="ar"?"Ø¨Ø¯Ù†ÙŠØ©":"Physical"})]}),e.jsx("span",{className:"font-bold text-orange-600",children:a.physicalEnergy})]}),a.balancedEnergy>0&&e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(N,{className:"w-4 h-4 text-green-600"}),e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:r==="ar"?"Ù…ØªÙˆØ§Ø²Ù†Ø©":"Balanced"})]}),e.jsx("span",{className:"font-bold text-green-600",children:a.balancedEnergy})]})]})]})]}),!x&&e.jsxs("div",{className:"p-5 border-t border-pink-100 dark:border-gray-700 space-y-4 sticky bottom-0 bg-white dark:bg-gray-800 shadow-[0_-4px_20px_rgba(0,0,0,0.1)] z-10",children:[e.jsxs("div",{className:"flex justify-between items-center bg-gradient-to-r from-pink-50 to-purple-50 dark:from-gray-700 dark:to-gray-600 rounded-2xl p-4 shadow-sm border border-pink-100 dark:border-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(R,{className:"w-5 h-5 text-primary"}),e.jsx("span",{className:"text-lg font-bold text-gray-700 dark:text-gray-300",children:l("cartTotal")||"Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ:"})]}),e.jsx("span",{className:"text-2xl font-extrabold bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent",children:o(D)})]}),e.jsxs("button",{onClick:P,className:"w-full py-4 bg-gradient-to-r from-primary to-secondary text-white rounded-2xl font-bold text-lg flex items-center justify-center gap-3 shadow-lg transition-[transform,box-shadow] hover:-translate-y-1 hover:shadow-glow active:scale-95 relative overflow-hidden group",children:[e.jsx("span",{className:"absolute inset-0 bg-white/20 translate-y-full group-hover:translate-y-0 transition-transform duration-300"}),e.jsx(W,{className:"w-6 h-6 relative z-10"}),e.jsx("span",{className:"relative z-10",children:l("checkoutButton")||"Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø·Ù„Ø¨"})]}),e.jsxs("div",{className:"flex items-center justify-center gap-4 text-xs text-gray-500 dark:text-gray-400 pt-2 border-t border-pink-100 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(Z,{className:"w-4 h-4 text-green-500"}),e.jsx("span",{children:l("securePayment")||"Ø¯ÙØ¹ Ø¢Ù…Ù†"})]}),e.jsx("div",{className:"w-1 h-1 bg-gray-300 dark:bg-gray-600 rounded-full"}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(_,{className:"w-4 h-4 text-blue-500"}),e.jsx("span",{children:l("fastDelivery")||"ØªÙˆØµÙŠÙ„ Ø³Ø±ÙŠØ¹"})]})]})]})]})})};export{ee as default};
